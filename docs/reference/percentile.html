<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>EdSurvey Percentiles — percentile • EdSurvey</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="EdSurvey Percentiles — percentile" />
<meta property="og:description" content="Calculates the percentiles of a numeric variable in an
             edsurvey.data.frame, a light.edsurvey.data.frame,
             or an edsurvey.data.frame.list." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EdSurvey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.7.8000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction to Analyzing NCES Data Using EdSurvey</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>EdSurvey Percentiles</h1>
    
    <div class="hidden name"><code>percentile.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculates the percentiles of a numeric variable in an
             <code>edsurvey.data.frame</code>, a <code>light.edsurvey.data.frame</code>,
             or an <code>edsurvey.data.frame.list</code>.</p>
    </div>

    <pre class="usage"><span class='fu'>percentile</span><span class='op'>(</span>
  <span class='va'>variable</span>,
  <span class='va'>percentiles</span>,
  <span class='va'>data</span>,
  weightVar <span class='op'>=</span> <span class='cn'>NULL</span>,
  jrrIMax <span class='op'>=</span> <span class='fl'>1</span>,
  varMethod <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"jackknife"</span>, <span class='st'>"Taylor"</span><span class='op'>)</span>,
  alpha <span class='op'>=</span> <span class='fl'>0.05</span>,
  omittedLevels <span class='op'>=</span> <span class='cn'>TRUE</span>,
  defaultConditions <span class='op'>=</span> <span class='cn'>TRUE</span>,
  recode <span class='op'>=</span> <span class='cn'>NULL</span>,
  returnVarEstInputs <span class='op'>=</span> <span class='cn'>FALSE</span>,
  returnNumberOfPSU <span class='op'>=</span> <span class='cn'>FALSE</span>,
  pctMethod <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"symmetric"</span>, <span class='st'>"unbiased"</span>, <span class='st'>"simple"</span><span class='op'>)</span>,
  confInt <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>variable</th>
      <td><p>the character name of the variable to percentiles computed,
typically a subject scale or subscale</p></td>
    </tr>
    <tr>
      <th>percentiles</th>
      <td><p>a numeric vector of percentiles in the range of 0 to 100
(inclusive)</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>an <code>edsurvey.data.frame</code> or an
<code>edsurvey.data.frame.list</code></p></td>
    </tr>
    <tr>
      <th>weightVar</th>
      <td><p>a character indicating the weight variable to use.</p></td>
    </tr>
    <tr>
      <th>jrrIMax</th>
      <td><p>a numeric value; when using the jackknife variance estimation method, the default estimation option, <code>jrrIMax=1</code>, uses the 
                  sampling variance from the first plausible value as the component for sampling variance estimation. The \(V_{jrr}\) 
                  term (see 
<a href='https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf'><em>Statistical Methods Used in EdSurvey</em></a>)
                  can be estimated with any number of plausible values, and values larger than the number of 
                  plausible values on the survey (including <code>Inf</code>) will result in all plausible values being used. 
                  Higher values of <code>jrrIMax</code> lead to longer computing times and more accurate variance estimates.</p></td>
    </tr>
    <tr>
      <th>varMethod</th>
      <td><p>a character set to <code>jackknife</code> or <code>Taylor</code>
that indicates the variance estimation method used when 
constructing the confidence intervals. The jackknife
variance estimation method is always
used to calculate the standard error.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>a numeric value between 0 and 1 indicating the confidence level.
An <code>alpha</code> value of 0.05 would indicate a 95% 
confidence interval and is the default.</p></td>
    </tr>
    <tr>
      <th>omittedLevels</th>
      <td><p>a logical value. When set to the default value of
<code>TRUE</code>, drops those levels of 
all factor variables that are specified in
<code>achievementVars</code> and <code>aggregatBy</code>. 
Use <code>print</code> on an <code>edsurvey.data.frame</code>
to see the omitted levels.</p></td>
    </tr>
    <tr>
      <th>defaultConditions</th>
      <td><p>a logical value. When set to the default value
of <code>TRUE</code>, uses the default 
conditions stored in an <code>edsurvey.data.frame</code>
to subset the data. 
Use <code>print</code> on an <code>edsurvey.data.frame</code>
to see the default conditions.</p></td>
    </tr>
    <tr>
      <th>recode</th>
      <td><p>a list of lists to recode variables. Defaults to
<code>NULL</code>. Can be set as
<code>recode=</code><code>list(var1=</code> <code>list(from=</code> <code>c("a",</code>
<code>"b",</code> <code>"c"),</code>
<code>to=</code> <code>"d"))</code>.</p></td>
    </tr>
    <tr>
      <th>returnVarEstInputs</th>
      <td><p>a logical value set to <code>TRUE</code> to return the
inputs to the jackknife and imputation variance
estimates which allows for the computation
of covariances between estimates.</p></td>
    </tr>
    <tr>
      <th>returnNumberOfPSU</th>
      <td><p>a logical value set to <code>TRUE</code> to return the number of 
primary sampling units (PSUs)</p></td>
    </tr>
    <tr>
      <th>pctMethod</th>
      <td><p>one of &#8220;unbiased&#8221;, &#8220;symmetric&#8221;, &#8220;simple&#8221;;
unbiased produces a weighted median unbiased percentile estimate,
whereas simple uses a basic formula that matches previously
published results. Symmetric uses a more basic formula
but requires that the percentile is symetric to multiplying
the quantity by negative one.</p></td>
    </tr>
    <tr>
      <th>confInt</th>
      <td><p>a Boolean indicating if the confidence interval should be returned</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The return type depends on whether the class of the <code>data</code> argument is an
<code>edsurvey.data.frame</code> or an <code>edsurvey.data.frame.list</code>.</p>
<p><strong>The data argument is an edsurvey.data.frame</strong>
  When the <code>data</code> argument is an <code>edsurvey.data.frame</code>,
  <code>percentile</code> returns an S3 object of class <code>percentile</code>.
  This is a <code>data.frame</code> with typical attributes (<code>names</code>,
  <code>row.names</code>, and <code>class</code>) and additional attributes as follows:</p>
<dt>n0</dt><dd><p>number of rows on <code>edsurvey.data.frame</code> before any conditions were applied</p></dd>
    <dt>nUsed</dt><dd><p>number of observations with valid data and weights larger than zero</p></dd>
    <dt>nPSU</dt><dd><p>number of PSUs used in the calculation</p></dd>
    <dt>call</dt><dd><p>the call used to generate these results</p></dd>

  The columns of the data.frame are as follows:
    <dt>percentile</dt><dd><p>the percentile of this row</p></dd>
    <dt>estimate</dt><dd><p>the estimated value of the percentile</p></dd>
    <dt>se</dt><dd><p>the jackknife standard error of the estimated percentile</p></dd>
    <dt>df</dt><dd><p>degrees of freedom</p></dd>
    <dt>confInt.ci_lower</dt><dd><p>the lower bound
                     of the confidence interval</p></dd>
    <dt>confInt.ci_upper</dt><dd><p>the upper bound
                     of the confidence interval</p></dd>
    <dt>nsmall</dt><dd><p>the number of units with more extreme results, averaged
                  across plausible values</p></dd>
  When the confInt argument is set to FALSE, the confidence
  intervals are not returned.

The data argument is an edsurvey.data.frame.list
  When the data argument is an edsurvey.data.frame.list,
  percentile returns an S3 object of class percentileList.
  This is a data.frame with a call attribute.
  The columns in the data.frame are identical to those in the previous
  section, but there also are columns from the edsurvey.data.frame.list.
  
    <dt>covs</dt><dd><p>a column for each column in the <code>covs</code> value of the
                <code>edsurvey.data.frame.list</code>.
                See Examples.</p></dd>

When returnVarEstInputs is TRUE, an attribute
varEstInputs also is returned that includes the variance estimate
inputs used for calculating covariances with <a href='varEstToCov.html'>varEstToCov</a>.

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Percentiles, their standard errors, and confidence intervals
are calculated according to the vignette titled
<a href='https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf'><em>Statistical Methods Used in EdSurvey</em></a>.
The standard errors and confidence intervals are based
on separate formulas and assumptions.</p>
<p>The Taylor series variance estimation procedure is not relevant to percentiles
because percentiles are not continuously differentiable.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Hyndman, R. J., &amp; Fan, Y. (1996). Sample quantiles in statistical packages. <em>American Statistician</em>, <em>50</em>, 361--365.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Paul Bailey</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># read in the example data (generated, not real student data)</span>
<span class='va'>sdf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='readNAEP.html'>readNAEP</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata/data"</span>, <span class='st'>"M36NT2PM.dat"</span>, package<span class='op'>=</span><span class='st'>"NAEPprimer"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># get the median of the composite</span>
<span class='fu'>percentile</span><span class='op'>(</span><span class='st'>"composite"</span>, <span class='fl'>50</span>, <span class='va'>sdf</span><span class='op'>)</span>

<span class='co'># get several percentiles</span>
<span class='fu'>percentile</span><span class='op'>(</span><span class='st'>"composite"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>25</span>,<span class='fl'>50</span>,<span class='fl'>75</span>,<span class='fl'>99</span>,<span class='fl'>100</span><span class='op'>)</span>, <span class='va'>sdf</span><span class='op'>)</span>
<span class='co'># build an edsurvey.data.frame.list</span>
<span class='va'>sdfA</span> <span class='op'>&lt;-</span> <span class='fu'><a href='subset.html'>subset</a></span><span class='op'>(</span><span class='va'>sdf</span>, <span class='va'>scrpsu</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>,<span class='fl'>45</span>,<span class='fl'>56</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>sdfB</span> <span class='op'>&lt;-</span> <span class='fu'><a href='subset.html'>subset</a></span><span class='op'>(</span><span class='va'>sdf</span>, <span class='va'>scrpsu</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>75</span>,<span class='fl'>76</span>,<span class='fl'>78</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>sdfC</span> <span class='op'>&lt;-</span> <span class='fu'><a href='subset.html'>subset</a></span><span class='op'>(</span><span class='va'>sdf</span>, <span class='va'>scrpsu</span> <span class='op'>%in%</span> <span class='fl'>100</span><span class='op'>:</span><span class='fl'>200</span><span class='op'>)</span>
<span class='va'>sdfD</span> <span class='op'>&lt;-</span> <span class='fu'><a href='subset.html'>subset</a></span><span class='op'>(</span><span class='va'>sdf</span>, <span class='va'>scrpsu</span> <span class='op'>%in%</span> <span class='fl'>201</span><span class='op'>:</span><span class='fl'>300</span><span class='op'>)</span>

<span class='va'>sdfl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='edsurvey.data.frame.list.html'>edsurvey.data.frame.list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>sdfA</span>, <span class='va'>sdfB</span>, <span class='va'>sdfC</span>, <span class='va'>sdfD</span><span class='op'>)</span>,
                                 labels<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"A locations"</span>,
                                           <span class='st'>"B locations"</span>,
                                           <span class='st'>"C locations"</span>,
                                           <span class='st'>"D locations"</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># this shows how these datasets will be described:</span>
<span class='va'>sdfl</span><span class='op'>$</span><span class='va'>covs</span>

<span class='fu'>percentile</span><span class='op'>(</span><span class='st'>"composite"</span>, <span class='fl'>50</span>, <span class='va'>sdfl</span><span class='op'>)</span>
<span class='fu'>percentile</span><span class='op'>(</span><span class='st'>"composite"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>25</span>, <span class='fl'>50</span>, <span class='fl'>75</span><span class='op'>)</span>, <span class='va'>sdfl</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul Bailey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


