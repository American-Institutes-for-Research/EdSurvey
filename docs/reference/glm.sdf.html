<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>EdSurvey Generalized Linear Models — glm.sdf • EdSurvey</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EdSurvey Generalized Linear Models — glm.sdf"><meta name="description" content="Fits a logit or probit that
             uses weights and variance estimates
             appropriate for the edsurvey.data.frame,
             the light.edsurvey.data.frame, or the edsurvey.data.frame.list."><meta property="og:description" content="Fits a logit or probit that
             uses weights and variance estimates
             appropriate for the edsurvey.data.frame,
             the light.edsurvey.data.frame, or the edsurvey.data.frame.list."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EdSurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction to Analyzing NCES Data Using EdSurvey</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/American-Institutes-for-Research/EdSurvey/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>EdSurvey Generalized Linear Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/American-Institutes-for-Research/EdSurvey/blob/HEAD/R/glm.sdf.R" class="external-link"><code>R/glm.sdf.R</code></a></small>
      <div class="d-none name"><code>glm.sdf.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fits a logit or probit that
             uses weights and variance estimates
             appropriate for the <code>edsurvey.data.frame</code>,
             the <code>light.edsurvey.data.frame</code>, or the <code>edsurvey.data.frame.list</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">glm.sdf</span><span class="op">(</span><span class="va">formula</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">binomial</a></span><span class="op">(</span>link <span class="op">=</span> <span class="st">"logit"</span><span class="op">)</span>, <span class="va">data</span>,</span>
<span>  weightVar <span class="op">=</span> <span class="cn">NULL</span>, relevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  varMethod<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jackknife"</span>, <span class="st">"Taylor"</span><span class="op">)</span>, jrrIMax <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dropOmittedLevels <span class="op">=</span> <span class="cn">TRUE</span>, defaultConditions <span class="op">=</span> <span class="cn">TRUE</span>, recode <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  returnNumberOfPSU<span class="op">=</span><span class="cn">FALSE</span>, returnVarEstInputs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  omittedLevels <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">logit.sdf</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  weightVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  relevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  varMethod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jackknife"</span>, <span class="st">"Taylor"</span><span class="op">)</span>,</span>
<span>  jrrIMax <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dropOmittedLevels <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  defaultConditions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  recode <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  returnNumberOfPSU <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  returnVarEstInputs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  omittedLevels <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">probit.sdf</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  weightVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  relevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  varMethod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"jackknife"</span>, <span class="st">"Taylor"</span><span class="op">)</span>,</span>
<span>  jrrIMax <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  dropOmittedLevels <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  defaultConditions <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  recode <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  returnNumberOfPSU <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  returnVarEstInputs <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  omittedLevels <span class="op">=</span> <span class="fu">deprecated</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>a <code><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></code> for the
linear model. See <code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></code>.
For logit and probit, we recommend using the <code><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I()</a></code> function
to define the level used for success. (See Examples.)</p></dd>


<dt id="arg-family">family<a class="anchor" aria-label="anchor" href="#arg-family"></a></dt>
<dd><p>the <code>glm.sdf</code> function currently fits only the binomial
outcome models, such as logit and probit, although other link
functions are available for binomial models. See the <code>link</code>
argument in the help for
<code><a href="https://rdrr.io/r/stats/family.html" class="external-link">family</a></code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>an <code>edsurvey.data.frame</code></p></dd>


<dt id="arg-weightvar">weightVar<a class="anchor" aria-label="anchor" href="#arg-weightvar"></a></dt>
<dd><p>character indicating the weight variable to use (see Details).
The <code>weightVar</code> must be one of the weights for the
<code>edsurvey.data.frame</code>. If <code>NULL</code>, uses the default
for the <code>edsurvey.data.frame</code>.</p></dd>


<dt id="arg-relevels">relevels<a class="anchor" aria-label="anchor" href="#arg-relevels"></a></dt>
<dd><p>a list; used to change the contrasts from the
default treatment contrasts to the treatment contrasts with a chosen omitted
group. The name of each element should be the variable name, and the value
should be the group to be omitted.</p></dd>


<dt id="arg-varmethod">varMethod<a class="anchor" aria-label="anchor" href="#arg-varmethod"></a></dt>
<dd><p>a character set to “jackknife” or “Taylor” that indicates the variance
estimation method to be used. See Details.</p></dd>


<dt id="arg-jrrimax">jrrIMax<a class="anchor" aria-label="anchor" href="#arg-jrrimax"></a></dt>
<dd><p>the <code>Vjrr</code> sampling variance term (see
<a href="https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf" class="external-link"><em>Statistical Methods Used in EdSurvey</em></a>)
                  can be estimated with
                  any positive number of plausible values and is estimated on
                  the lower
                  of the number of available plausible values and <code>jrrIMax</code>. When
                  <code>jrrIMax</code> is set to <code>Inf</code>, all plausible values will be used.
                  Higher values of <code>jrrIMax</code> lead to longer computing times and more
                  accurate variance estimates.</p></dd>


<dt id="arg-dropomittedlevels">dropOmittedLevels<a class="anchor" aria-label="anchor" href="#arg-dropomittedlevels"></a></dt>
<dd><p>a logical value. When set to the default value of <code>TRUE</code>, drops
those levels of all factor variables that are specified
in <code>edsurvey.data.frame</code>. Use <code>print</code> on an
<code>edsurvey.data.frame</code> to see the omitted levels.</p></dd>


<dt id="arg-defaultconditions">defaultConditions<a class="anchor" aria-label="anchor" href="#arg-defaultconditions"></a></dt>
<dd><p>a logical value. When set to the default value of <code>TRUE</code>, uses
the default conditions stored in an <code>edsurvey.data.frame</code>
to subset the data. Use <code>print</code> on an
<code>edsurvey.data.frame</code> to see the default conditions.</p></dd>


<dt id="arg-recode">recode<a class="anchor" aria-label="anchor" href="#arg-recode"></a></dt>
<dd><p>a list of lists to recode variables. Defaults to <code>NULL</code>. Can be set as
<code>recode=</code> <code>list(</code><code>var1=</code> <code>list(from=</code> <code>c("a",</code> <code>"b",</code> <code>"c"),</code> <code>to=</code><code>"d"))</code>.</p></dd>


<dt id="arg-returnnumberofpsu">returnNumberOfPSU<a class="anchor" aria-label="anchor" href="#arg-returnnumberofpsu"></a></dt>
<dd><p>a logical value set to <code>TRUE</code> to return the number of
primary sampling units (PSUs)</p></dd>


<dt id="arg-returnvarestinputs">returnVarEstInputs<a class="anchor" aria-label="anchor" href="#arg-returnvarestinputs"></a></dt>
<dd><p>a logical value set to <code>TRUE</code> to return the
inputs to the jackknife and imputation variance
estimates, which allow for
the computation
of covariances between estimates.</p></dd>


<dt id="arg-omittedlevels">omittedLevels<a class="anchor" aria-label="anchor" href="#arg-omittedlevels"></a></dt>
<dd><p>this argument is deprecated. Use <code>dropOmittedLevels</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>edsurveyGlm</code> with the following elements:</p>
<dl><dt>call</dt>
<dd><p>the function call</p></dd>

   <dt>formula</dt>
<dd><p>the formula used to fit the model</p></dd>

   <dt>coef</dt>
<dd><p>the estimates of the coefficients</p></dd>

   <dt>se</dt>
<dd><p>the standard error estimates of the coefficients</p></dd>

   <dt>Vimp</dt>
<dd><p>the estimated variance caused by uncertainty in the scores (plausible value variables)</p></dd>

   <dt>Vjrr</dt>
<dd><p>the estimated variance from sampling</p></dd>

   <dt>M</dt>
<dd><p>the number of plausible values</p></dd>

   <dt>nPSU</dt>
<dd><p>the number of PSUs used in the calculation</p></dd>

   <dt>varm</dt>
<dd><p>the variance estimates under the various plausible values</p></dd>

   <dt>coefm</dt>
<dd><p>the values of the coefficients under the various plausible values</p></dd>

   <dt>coefmat</dt>
<dd><p>the coefficient matrix (typically produced by the summary of a model)</p></dd>

   <dt>weight</dt>
<dd><p>the name of the weight variable</p></dd>

   <dt>npv</dt>
<dd><p>the number of plausible values</p></dd>

   <dt>njk</dt>
<dd><p>the number of the jackknife replicates used</p></dd>

   <dt>varMethod</dt>
<dd><p>always <code>jackknife</code></p></dd>

   <dt>varEstInputs</dt>
<dd><p>when <code>returnVarEstInputs</code> is <code>TRUE</code>,
                       this element is returned. These are
                       used for calculating covariances with
                       <code><a href="varEstToCov.html">varEstToCov</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function implements an estimator that correctly handles left-hand side
variables that are logical, allows for survey sampling weights, and estimates
variances using the jackknife replication or Taylor series.
The vignette titled
<a href="https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf" class="external-link"><em>Statistical Methods Used in EdSurvey</em></a>
describes estimation of the reported statistics and how it depends on <code>varMethod</code>.</p>
<p>The coefficients are estimated
using the sample weights according to the section
“Estimation of Weighted Means When Plausible Values Are Not Present”
or the section
“Estimation of Weighted Means When Plausible Values Are Present,”
depending on if there are assessment variables or variables with plausible values
in them.</p>
<p>How the standard errors of the coefficients are estimated depends on the
presence of plausible values (assessment variables),
But once it is obtained, the <em>t</em> statistic
is given by $$t=\frac{\hat{\beta}}{\sqrt{\mathrm{var}(\hat{\beta})}}$$ where
\( \hat{\beta} \) is the estimated coefficient and \(\mathrm{var}(\hat{\beta})\) is
its variance of that estimate.</p>
<p><code>logit.sdf</code> and <code>probit.sdf</code> are included for convenience only;
they give the same results as a call to <code>glm.sdf</code> with the binomial family
and the link function named in the function call (logit or probit).
By default, <code>glm</code> fits a logistic regression when <code>family</code> is not set,
so the two are expected to give the same results in that case.
Other types of generalized linear models are not supported.</p>
<div class="section">
<h3 id="variance-estimation-of-coefficients">Variance estimation of coefficients<a class="anchor" aria-label="anchor" href="#variance-estimation-of-coefficients"></a></h3>
<p>All variance estimation methods are shown in the vignette titled
<a href="https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf" class="external-link"><em>Statistical Methods Used in EdSurvey</em></a>.
  When the predicted
  value does not have plausible values and <code>varMethod</code> is set to
  <code>jackknife</code>, the variance of the coefficients
  is estimated according to the section
“Estimation of Standard Errors of Weighted Means When
        Plausible Values Are Not Present, Using the Jackknife Method.”</p>
<p>When plausible values are present and <code>varMethod</code> is set to
  <code>jackknife</code>, the
  variance of the coefficients is estimated according to the section
“Estimation of Standard Errors of Weighted Means When
        Plausible Values Are Present, Using the Jackknife Method.”</p>
<p>When the predicted
  value does not have plausible values and <code>varMethod</code> is set to
  <code>Taylor</code>, the variance of the coefficients
  is estimated according to the section
“Estimation of Standard Errors of Weighted Means When
        Plausible Values Are Not Present, Using the Taylor Series Method.”</p>
<p>When plausible values are present and <code>varMethod</code> is set to
  <code>Taylor</code>, the
  variance of the coefficients is estimated according to the section
“Estimation of Standard Errors of Weighted Means When
        Plausible Values Are Present, Using the Taylor Series Method.”</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a></h2>


<p>Of the common hypothesis tests for joint parameter testing, only the Wald
test is widely used with plausible values and sample weights. As such, it
replaces, if imperfectly, the Akaike Information Criteria (AIC), the
likelihood ratio test, chi-squared, and analysis of variance (ANOVA, including <em>F</em>-tests).
See <code><a href="waldTest.html">waldTest</a></code> or
the vignette titled
<a href="https://www.air.org/sites/default/files/EdSurvey-WaldTest.pdf" class="external-link"><em>Methods and Overview of Using EdSurvey for Running Wald Tests</em></a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Paul Bailey</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># read in the example data (generated, not real student data)</span></span></span>
<span class="r-in"><span><span class="va">sdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="readNAEP.html">readNAEP</a></span><span class="op">(</span>path<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/data"</span>, <span class="st">"M36NT2PM.dat"</span>, package <span class="op">=</span> <span class="st">"NAEPprimer"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># by default uses the jackknife variance method using replicate weights</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sdf</span><span class="op">$</span><span class="va">b013801</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a binary variable for 26 or more books</span></span></span>
<span class="r-in"><span><span class="va">sdf</span><span class="op">$</span><span class="va">b013801_26more</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">sdf</span><span class="op">$</span><span class="va">b013801</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"26-100"</span>, <span class="st">"&gt;100"</span><span class="op">)</span>, yes <span class="op">=</span> <span class="fl">1</span>, no <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compare the multiple categorical and binary variable for accuracy</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sdf</span><span class="op">$</span><span class="va">b013801</span>, <span class="va">sdf</span><span class="op">$</span><span class="va">b013801_26more</span><span class="op">)</span> </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">logit1</span> <span class="op">&lt;-</span> <span class="fu">logit.sdf</span><span class="op">(</span>formula<span class="op">=</span><span class="va">b013801_26more</span> <span class="op">~</span> <span class="va">dsex</span> <span class="op">+</span> <span class="va">b017451</span>, data<span class="op">=</span><span class="va">sdf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use summary to get detailed results</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">logit1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Taylor series variance estimation</span></span></span>
<span class="r-in"><span><span class="va">logit1t</span> <span class="op">&lt;-</span> <span class="fu">logit.sdf</span><span class="op">(</span>formula<span class="op">=</span><span class="va">b013801_26more</span> <span class="op">~</span> <span class="va">dsex</span> <span class="op">+</span> <span class="va">b017451</span>, data<span class="op">=</span><span class="va">sdf</span>,</span></span>
<span class="r-in"><span>                     varMethod<span class="op">=</span><span class="st">"Taylor"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">logit1t</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># when using ifelse for PVs, use the ifelse in the formula call. PVs contains multiple variables</span></span></span>
<span class="r-in"><span><span class="va">logit2</span> <span class="op">&lt;-</span> <span class="fu">logit.sdf</span><span class="op">(</span>formula<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">composite</span> <span class="op">&gt;=</span> <span class="fl">300</span>, yes <span class="op">=</span> <span class="fl">1</span>, no <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">~</span> <span class="va">dsex</span> <span class="op">+</span> <span class="va">b013801</span>, data<span class="op">=</span><span class="va">sdf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">logit2</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># note this recoding of composite must be done in the formula</span></span></span>
<span class="r-in"><span><span class="va">logit3</span> <span class="op">&lt;-</span> <span class="fu">glm.sdf</span><span class="op">(</span>formula<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">composite</span> <span class="op">&gt;=</span> <span class="fl">300</span><span class="op">)</span> <span class="op">~</span> <span class="va">dsex</span> <span class="op">+</span> <span class="va">b013801</span>, data<span class="op">=</span><span class="va">sdf</span>, </span></span>
<span class="r-in"><span>                  family<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">quasibinomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Wald test for joint hypothesis that all coefficients in b013801 are zero</span></span></span>
<span class="r-in"><span><span class="fu"><a href="waldTest.html">waldTest</a></span><span class="op">(</span>model<span class="op">=</span><span class="va">logit3</span>, coefficients<span class="op">=</span><span class="st">"b013801"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">logit3</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use plausible values as predictors in a generalized linear regression model</span></span></span>
<span class="r-in"><span><span class="co"># ifelse function converts the selected categories to 1 and all the others including</span></span></span>
<span class="r-in"><span><span class="co"># Multiple and Omitted levels to 0</span></span></span>
<span class="r-in"><span><span class="va">sdf</span><span class="op">$</span><span class="va">AlgebraClass</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">sdf</span><span class="op">$</span><span class="va">m815701</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Algebra I (1-yr crs)'</span>,</span></span>
<span class="r-in"><span>                                              <span class="st">'1st yr 2-yr Algeb I'</span>,</span></span>
<span class="r-in"><span>                                              <span class="st">'2nd yr 2-yr Algeb I'</span>,</span></span>
<span class="r-in"><span>                                              <span class="st">'Algebra II'</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">sdf</span><span class="op">$</span><span class="va">m815701</span>, <span class="va">sdf</span><span class="op">$</span><span class="va">AlgebraClass</span><span class="op">)</span> </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">logit4</span> <span class="op">&lt;-</span> <span class="fu">logit.sdf</span><span class="op">(</span>formula <span class="op">=</span> <span class="va">AlgebraClass</span> <span class="op">~</span> <span class="va">algebra</span>,</span></span>
<span class="r-in"><span>                    weightVar <span class="op">=</span> <span class="st">'origwt'</span>, data <span class="op">=</span> <span class="va">sdf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">logit4</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># alternatively, same analyses can be executed using the I() function with</span></span></span>
<span class="r-in"><span><span class="co"># dropOmittedLevels = FALSE</span></span></span>
<span class="r-in"><span><span class="va">logit5</span> <span class="op">&lt;-</span> <span class="fu">logit.sdf</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">m815701</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Algebra I (1-yr crs)'</span>, </span></span>
<span class="r-in"><span>                      <span class="st">'1st yr 2-yr Algeb I'</span>, <span class="st">'2nd yr 2-yr Algeb I'</span>, </span></span>
<span class="r-in"><span>                      <span class="st">'Algebra II'</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="va">algebra</span>, </span></span>
<span class="r-in"><span>                      weightVar <span class="op">=</span> <span class="st">'origwt'</span>, data <span class="op">=</span> <span class="va">sdf</span>, </span></span>
<span class="r-in"><span>                      dropOmittedLevels <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">logit5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Bailey, Ahmad Emad, Huade Huo, Michael Lee, Yuqi Liao, Alex Lishinski, Trang Nguyen, Qingshu Xie, Jiao Yu, Ting Zhang, Eric Buehler, Sun-joo Lee, Blue Webb, Thomas Fink, Sinan Yavuz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

