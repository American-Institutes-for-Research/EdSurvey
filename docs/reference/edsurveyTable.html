<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>EdSurvey Tables With Conditional Means — edsurveyTable • EdSurvey</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="EdSurvey Tables With Conditional Means — edsurveyTable" />
<meta property="og:description" content="Returns a summary table (as a data.frame)
that shows the number of students, the percentage of students, and the mean
value of the outcome (or left-hand side) variable by the
predictor (or right-hand side) variable(s)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EdSurvey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.7.0.9003</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction to Analyzing NCES Data Using EdSurvey</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/American-Institutes-for-Research/EdSurvey/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>EdSurvey Tables With Conditional Means</h1>
    <small class="dont-index">Source: <a href='https://github.com/American-Institutes-for-Research/EdSurvey/blob/master/R/edsurveyTable.R'><code>R/edsurveyTable.R</code></a></small>
    <div class="hidden name"><code>edsurveyTable.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Returns a summary table (as a <code><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></code>)
that shows the number of students, the percentage of students, and the mean
value of the outcome (or left-hand side) variable by the
predictor (or right-hand side) variable(s).</p>
    </div>

    <pre class="usage"><span class='fu'>edsurveyTable</span><span class='op'>(</span>
  <span class='va'>formula</span>,
  <span class='va'>data</span>,
  weightVar <span class='op'>=</span> <span class='cn'>NULL</span>,
  jrrIMax <span class='op'>=</span> <span class='fl'>1</span>,
  pctAggregationLevel <span class='op'>=</span> <span class='cn'>NULL</span>,
  returnMeans <span class='op'>=</span> <span class='cn'>TRUE</span>,
  returnSepct <span class='op'>=</span> <span class='cn'>TRUE</span>,
  varMethod <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"jackknife"</span>, <span class='st'>"Taylor"</span><span class='op'>)</span>,
  drop <span class='op'>=</span> <span class='cn'>FALSE</span>,
  omittedLevels <span class='op'>=</span> <span class='cn'>TRUE</span>,
  defaultConditions <span class='op'>=</span> <span class='cn'>TRUE</span>,
  recode <span class='op'>=</span> <span class='cn'>NULL</span>,
  returnVarEstInputs <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>object of class <code><a href='https://rdrr.io/r/stats/formula.html'>formula</a></code>,
potentially with
a subject scale or subscale
on the left-hand side and
variables to tabulate
on the right-hand side.
When the left-hand side of the
formula is omitted and <code>returnMeans</code> is <code>TRUE</code>,
then the default subject scale or subscale is used.
You can find the default composite scale and all subscales
using the function <code><a href='showPlausibleValues.html'>showPlausibleValues</a></code>.
Note that the order of the right-hand side variables affects the output.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>object of class <code>edsurvey.data.frame</code>. See <code><a href='readNAEP.html'>readNAEP</a></code>
for how to generate an <code>edsurvey.data.frame</code>.</p></td>
    </tr>
    <tr>
      <th>weightVar</th>
      <td><p>character string indicating the weight variable to use.
Note that only the name of the
weight variable needs to be included here, and any
replicate weights will be automatically included.
When this argument is <code>NULL</code>, the function uses the default.
Use <code><a href='showWeights.html'>showWeights</a></code> to find the default.</p></td>
    </tr>
    <tr>
      <th>jrrIMax</th>
      <td><p>a numeric value; when using the jackknife variance estimation method, the default estimation option, <code>jrrIMax=1</code>, uses the 
  sampling variance from the first plausible value as the component for sampling variance estimation. The \(V_{jrr}\) 
  term (see the Details section of
<code><a href='lm.sdf.html'>lm.sdf</a></code> to see the definition of \(V_{jrr}\)) can be estimated with any number of plausible values, and values larger than the number of 
  plausible values on the survey (including <code>Inf</code>) will result in all of the plausible values being used. 
  Higher values of <code>jrrIMax</code> lead to longer computing times and more accurate variance estimates.</p></td>
    </tr>
    <tr>
      <th>pctAggregationLevel</th>
      <td><p>the percentage variable sums up to 100 for the first
<code>pctAggregationLevel</code> columns.
So, when set to <code>0</code>, the <code>PCT</code> column adds up to 1
across the entire sample.
When set to <code>1</code>, the <code>PCT</code> column adds up to 1
within each level of the first variable on the
right-hand side of the formula; when set to <code>2</code>,
then the percentage
adds up to 100 within the interaction of the
first and second variable, and so on.
Default is <code>NULL</code>, which will result in the
lowest feasible aggregation level. 
See Examples section.</p></td>
    </tr>
    <tr>
      <th>returnMeans</th>
      <td><p>a logical value; set to <code>TRUE</code> (the default) to get the <code>MEAN</code> and
<code>SE(MEAN)</code> columns in the returned table described in the Value section.</p></td>
    </tr>
    <tr>
      <th>returnSepct</th>
      <td><p>set to <code>TRUE</code> (the default) to get the <code>SEPCT</code> column in the returned table described in the Value section.</p></td>
    </tr>
    <tr>
      <th>varMethod</th>
      <td><p>a character set to <code>jackknife</code> or <code>Taylor</code> that indicates the variance estimation method
to be used.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>a logical value. When set to the default value of <code>FALSE</code>, when a single column is returned, it is still represented as a <code>data.frame</code> and is
not converted to a vector.</p></td>
    </tr>
    <tr>
      <th>omittedLevels</th>
      <td><p>a logical value. When set to the default value of <code>TRUE</code>, drops those levels of all factor variables that are specified
in an <code>edsurvey.data.frame</code>. Use <code>print</code> on an <code>edsurvey.data.frame</code> to see the omitted levels.</p></td>
    </tr>
    <tr>
      <th>defaultConditions</th>
      <td><p>a logical value. When set to the default value of <code>TRUE</code>, uses the default conditions stored in an <code>edsurvey.data.frame</code>
to subset the data. Use <code>print</code> on an <code>edsurvey.data.frame</code> to see the default conditions.</p></td>
    </tr>
    <tr>
      <th>recode</th>
      <td><p>a list of lists to recode variables. Defaults to <code>NULL</code>. Can be set as
<code>recode</code> <code><a href='https://rdrr.io/r/base/assignOps.html'>=</a></code> <code>list(var1</code> <code><a href='https://rdrr.io/r/base/assignOps.html'>=</a></code> <code>list(from</code> <code><a href='https://rdrr.io/r/base/assignOps.html'>=</a></code> <code>c("a", "b", "c"),</code> <code>to</code> <code><a href='https://rdrr.io/r/base/assignOps.html'>=</a></code> <code>"c"))</code>.</p></td>
    </tr>
    <tr>
      <th>returnVarEstInputs</th>
      <td><p>a logical value set to <code>TRUE</code> to return the
inputs to the jackknife and imputation variance
estimates, which allows for
the computation
of covariances between estimates.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A table with the following columns:</p>
<dt>RHS levels</dt><dd><p>one column for each right-hand side variable. Each row
                     regards students who are at the levels shown in that row.</p></dd>
   <dt>N</dt><dd><p>count of the number of students in the survey in the <code>RHS levels</code></p></dd>
   <dt>WTD_N</dt><dd><p>the weighted <em>N</em> count of students in the survey in <code>RHS levels</code></p></dd>
   <dt>PCT</dt><dd><p>the percentage of students at the aggregation level specified by <code>pctAggregationLevel</code> (see Arguments).
                     See the vignette titled
        <a href='https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf'><em>Statistical Methods Used in EdSurvey</em></a>
            in the section
&#8220;Estimation of Weighted Percentages&#8221; and its first subsection
&#8220;Estimation of Weighted Percentages When Plausible Values Are Not Present.&#8221;</p></dd>
   <dt>SE(PCT)</dt><dd><p>the standard  error of the percentage, accounting
                         for the survey sampling methodology. When <code>varMethod</code>
                         is the <code>jackknife</code>, the calculation of this column is
                         described in the vignette titled
<a href='https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf'><em>Statistical Methods Used in EdSurvey</em></a>
 in the section
&#8220;Estimation of the Standard Error of Weighted Percentages When Plausible Values Are Not Present, Using the Jackknife Method.&#8221;
                      When <code>varMethod</code> is set to <code>Taylor</code>, the calculation of this column is described in
&#8220;Estimation of the Standard Error of Weighted Percentages When Plausible Values Are Not Present, Using the Taylor Series Method.&#8221;</p></dd>
   <dt>MEAN</dt><dd><p>the mean assessment score for units in the <code>RHS levels</code>, calculated according to the  vignette titled
<a href='https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf'><em>Statistical Methods Used in EdSurvey</em></a>
in the section
&#8220;Estimation of Weighted Means When Plausible Values Are Present.&#8221;</p></dd>
   <dt>SE(MEAN)</dt><dd><p>the standard error of the <code>MEAN</code> column (the mean assessment score for units in the <code>RHS levels</code>), calculated according to the vignette titled
<a href='https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf'><em>Statistical Methods Used in EdSurvey</em></a>                      
in the sections
&#8220;Estimation of Standard Errors of Weighted Means When Plausible Values Are Present, Using the Jackknife Method&#8221;
or 
&#8220;Estimation of Standard Errors of Weighted Means When Plausible Values Are Present, Using the Taylor Series Method,&#8221;
depending on the value of <code>varMethod</code>.</p></dd>

 When returnVarEstInputs is TRUE, two additional elements are
 returned. These are meanVarEstInputs and pctVarEstInputs and
 regard the MEAN and PCT columns, respectively. These two 
 objects can be used for calculating covariances with
 <a href='varEstToCov.html'>varEstToCov</a>.

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This method can be used to generate a simple one-way, two-way, or
<em>n</em>-way
table with unweighted and weighted <em>n</em> values and percentages. It also
can calculate the average of the subject scale or subscale for students at
each level of the cross-tabulation table.</p>      
<p>A detailed description of all statistics is given in the vignette titled
<a href='https://www.air.org/sites/default/files/EdSurvey-Statistics.pdf'><em>Statistical Methods Used in EdSurvey</em></a>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Binder, D. A. (1983). On the variances of asymptotically normal estimators from complex surveys. <em>International Statistical Review</em>, <em>51</em>(3), 279--292.</p>
<p>Rubin, D. B. (1987). <em>Multiple imputation for nonresponse in surveys</em>. New York, NY: Wiley.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Paul Bailey and Ahmad Emad</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># read in the example data (generated, not real student data)</span>

<span class='va'>sdf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='readNAEP.html'>readNAEP</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata/data"</span>, <span class='st'>"M36NT2PM.dat"</span>, package <span class='op'>=</span> <span class='st'>"NAEPprimer"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># create a table that shows only the breakdown of dsex</span>
<span class='fu'>edsurveyTable</span><span class='op'>(</span><span class='va'>composite</span> <span class='op'>~</span> <span class='va'>dsex</span>, data<span class='op'>=</span><span class='va'>sdf</span>, returnMeans<span class='op'>=</span><span class='cn'>FALSE</span>, returnSepct<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># create a table with composite scores by dsex</span>
<span class='fu'>edsurveyTable</span><span class='op'>(</span><span class='va'>composite</span> <span class='op'>~</span> <span class='va'>dsex</span>, data<span class='op'>=</span><span class='va'>sdf</span><span class='op'>)</span>

<span class='co'># add a second variable</span>
<span class='fu'>edsurveyTable</span><span class='op'>(</span><span class='va'>composite</span> <span class='op'>~</span> <span class='va'>dsex</span> <span class='op'>+</span> <span class='va'>b017451</span>, data<span class='op'>=</span><span class='va'>sdf</span><span class='op'>)</span>

<span class='co'># add a second variable, do not omit any levels</span>
<span class='fu'>edsurveyTable</span><span class='op'>(</span><span class='va'>composite</span> <span class='op'>~</span> <span class='va'>dsex</span> <span class='op'>+</span> <span class='va'>b017451</span> <span class='op'>+</span> <span class='va'>b003501</span>, data<span class='op'>=</span><span class='va'>sdf</span>, omittedLevels<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># add a second variable, do not omit any levels, change aggregation level</span>
<span class='fu'>edsurveyTable</span><span class='op'>(</span><span class='va'>composite</span> <span class='op'>~</span> <span class='va'>dsex</span> <span class='op'>+</span> <span class='va'>b017451</span> <span class='op'>+</span> <span class='va'>b003501</span>, data<span class='op'>=</span><span class='va'>sdf</span>, omittedLevels<span class='op'>=</span><span class='cn'>FALSE</span>,
              pctAggregationLevel<span class='op'>=</span><span class='fl'>0</span><span class='op'>)</span>

<span class='fu'>edsurveyTable</span><span class='op'>(</span><span class='va'>composite</span> <span class='op'>~</span> <span class='va'>dsex</span> <span class='op'>+</span> <span class='va'>b017451</span> <span class='op'>+</span> <span class='va'>b003501</span>, data<span class='op'>=</span><span class='va'>sdf</span>, omittedLevels<span class='op'>=</span><span class='cn'>FALSE</span>,
              pctAggregationLevel<span class='op'>=</span><span class='fl'>1</span><span class='op'>)</span>

<span class='fu'>edsurveyTable</span><span class='op'>(</span><span class='va'>composite</span> <span class='op'>~</span> <span class='va'>dsex</span> <span class='op'>+</span> <span class='va'>b017451</span> <span class='op'>+</span> <span class='va'>b003501</span>, data<span class='op'>=</span><span class='va'>sdf</span>, omittedLevels<span class='op'>=</span><span class='cn'>FALSE</span>,
              pctAggregationLevel<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>

<span class='co'># variance estimation using the Taylor series </span>
<span class='fu'>edsurveyTable</span><span class='op'>(</span><span class='va'>composite</span> <span class='op'>~</span> <span class='va'>dsex</span> <span class='op'>+</span> <span class='va'>b017451</span> <span class='op'>+</span> <span class='va'>b003501</span>, data<span class='op'>=</span><span class='va'>sdf</span>, varMethod<span class='op'>=</span><span class='st'>"Taylor"</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul Bailey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


