<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>EdSurvey Direct Estimation — mml.sdf • EdSurvey</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="EdSurvey Direct Estimation — mml.sdf" />
<meta property="og:description" content="Prepare IRT parameters and score items and then estimate a linear model with direct estimation." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EdSurvey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.7.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction to Analyzing NCES Data Using EdSurvey</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/American-Institutes-for-Research/EdSurvey/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>EdSurvey Direct Estimation</h1>
    <small class="dont-index">Source: <a href='https://github.com/American-Institutes-for-Research/EdSurvey/blob/master/R/mml.sdf.R'><code>R/mml.sdf.R</code></a></small>
    <div class="hidden name"><code>mml.sdf.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Prepare IRT parameters and score items and then estimate a linear model with direct estimation.</p>
    </div>

    <pre class="usage"><span class='fu'>mml.sdf</span><span class='op'>(</span>
  <span class='va'>formula</span>,
  <span class='va'>data</span>,
  weightVar <span class='op'>=</span> <span class='cn'>NULL</span>,
  omittedLevels <span class='op'>=</span> <span class='cn'>TRUE</span>,
  composite <span class='op'>=</span> <span class='cn'>TRUE</span>,
  dctPath <span class='op'>=</span> <span class='cn'>NULL</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
  multiCore <span class='op'>=</span> <span class='cn'>FALSE</span>,
  numberOfCores <span class='op'>=</span> <span class='cn'>NULL</span>,
  minNode <span class='op'>=</span> <span class='op'>-</span><span class='fl'>4</span>,
  maxNode <span class='op'>=</span> <span class='fl'>4</span>,
  Q <span class='op'>=</span> <span class='fl'>34</span>,
  scoreDict <span class='op'>=</span> <span class='fu'>defaultNAEPScoreCard</span><span class='op'>(</span><span class='op'>)</span>,
  idVar <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>a <code><a href='https://rdrr.io/r/stats/formula.html'>formula</a></code> for the
model.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>an <code>edsurvey.data.frame</code> for the National Assessment of Educational Progress (NAEP) 
and the Trends in International Mathematics and Science Study (TIMSS).</p></td>
    </tr>
    <tr>
      <th>weightVar</th>
      <td><p>a character indicating the weight variable to use.
The <code>weightVar</code> must be one of the weights for the
<code>edsurvey.data.frame</code>. If <code>NULL</code>, it  uses the default
for the <code>edsurvey.data.frame</code>.</p></td>
    </tr>
    <tr>
      <th>omittedLevels</th>
      <td><p>a logical value. When set to the default value of <code>TRUE</code>, drops
the levels of all factor variables that are specified
in an <code>edsurvey.data.frame</code>. Use <code>print</code> on an
<code>edsurvey.data.frame</code> to see the omitted levels.</p></td>
    </tr>
    <tr>
      <th>composite</th>
      <td><p>logical; for a NAEP composite, setting to <code>FALSE</code> fits the model to all items at once,
in a single construct, whereas setting to <code>TRUE</code> fits the model as a NAEP composite
(i.e., a weighted average of the subscales). This argument is not applicable for TIMSS.</p></td>
    </tr>
    <tr>
      <th>dctPath</th>
      <td><p>a connection that points to the location of a NAEP dct file. A dct file can be used to input custom item response theory (IRT)
parameters and subscale/subtest weights for NAEP assessments compared with those provided in the <code>NAEPirtparams</code> package. Otherwise,
the argument defaults to NULL and IRT parameters and subscale weights from <code>NAEPirtparams</code> are used.
IRT parameters for TIMSS cannot be supplied through a <code>dctPath</code> and are downloaded by using the <code><a href='downloadTIMSS.html'>downloadTIMSS</a></code> function.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical; indicates whether a detailed printout should display during execution, only for NAEP data.</p></td>
    </tr>
    <tr>
      <th>multiCore</th>
      <td><p>allows the <code>foreach</code> package to be used. You should
                 have already set up
<code><a href='https://rdrr.io/pkg/doParallel/man/registerDoParallel.html'>registerDoParallel</a></code>.</p></td>
    </tr>
    <tr>
      <th>numberOfCores</th>
      <td><p>the number of cores to be used when using <code>multiCore</code>. Defaults to 75% of available cores. Users 
can check available cores with <code>detectCores()</code>.</p></td>
    </tr>
    <tr>
      <th>minNode</th>
      <td><p>numeric; minimum integration point in direct estimation; see <code><a href='https://american-institutes-for-research.github.io/Dire/reference/mml.html'>mml</a></code>.</p></td>
    </tr>
    <tr>
      <th>maxNode</th>
      <td><p>numeric; maximum integration point in direct estimation; see <code><a href='https://american-institutes-for-research.github.io/Dire/reference/mml.html'>mml</a></code>.</p></td>
    </tr>
    <tr>
      <th>Q</th>
      <td><p>integer; number of integration points per student used when integrating over the levels of the latent outcome construct.</p></td>
    </tr>
    <tr>
      <th>scoreDict</th>
      <td><p>a <code>data.frame</code> that includes guidelines for scoring the provided NAEP data. 
Here, <em>scoring</em> refers to turning item responses into scores on each item.
To see the default scoring guidelines, call the function <code>defaultNAEPScoreCard()</code>, or see the Examples section.
See Details for more information on possible scores.</p></td>
    </tr>
    <tr>
      <th>idVar</th>
      <td><p>a variable that is used to explicitly define the name of the student identifier 
variable to be used from <code>data</code>. Defaults to <code>NULL</code>, and <code>sid</code> is used 
as the student identifier.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An <code>edSurveyMML</code> object, which is the outcome from <code>mml.sdf</code>, with the following elements:</p>
<dt>mml</dt><dd><p>an object containing information from the <code>mml</code> procedure. 
   <code>?mml</code> can be used for further information.</p></dd>
   <dt>scoreDict</dt><dd><p>the scoring used in the <code>mml</code> procedure</p></dd>.
   <dt>itemMapping</dt><dd><p>the item mapping used in the <code>mml</code> procedure</p></dd>.

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Typically, models are fit with NAEP data using plausible values to integrate out the uncertainty in the measurement of individual
student outcomes. When direct estimation is used, the measurement error is integrated out explicitly using <code>Q</code> quadrature points.
See documentation for <code><a href='https://american-institutes-for-research.github.io/Dire/reference/mml.html'>mml</a></code> in the <code>Dire</code> package.</p>
<p>The <code>scoreDict</code> helps turn response categories that are not simple item responses, such as <code>Not Reached</code> and <code>Multiple</code>,
to something coded as inputs for the <code>mml</code> function in <code>Dire</code>. How <code>mml</code> treats these values depends on the test.
For NAEP, for a dichotomous item, 8 is scored as the same proportion correct as the guessing parameter for that item, 0 is 
an incorrect response, an NA does not change the student's score, and 1 is correct. TIMSS does not require a <code>scoreDict</code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Cohen, J., &amp; Jiang, T. (1999). Comparison of partially measured latent traits across nominal subgroups.
   <em>Journal of the American Statistical Association</em>, <em>94</em>(448), 1035--1044. https://doi.org/10.2307/2669917</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'>## Direct Estimation with NAEP </span>
<span class='co'># Load data </span>
<span class='va'>sdfNAEP</span> <span class='op'>&lt;-</span> <span class='fu'><a href='readNAEP.html'>readNAEP</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata/data"</span>, <span class='st'>"M36NT2PM.dat"</span>, package <span class='op'>=</span> <span class='st'>"NAEPprimer"</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Inspect scoring guidelines</span>
<span class='fu'>defaultNAEPScoreCard</span><span class='op'>(</span><span class='op'>)</span>

<span class='co'># example output: </span>
<span class='co'>#          resCat pointMult pointConst</span>
<span class='co'># 1     Multiple         8          0</span>
<span class='co'># 2  Not Reached        NA         NA</span>
<span class='co'># 3      Missing        NA         NA</span>
<span class='co'># 4      Omitted         8          0</span>
<span class='co'># 5    Illegible         0          0</span>
<span class='co'># 6 Non-Rateable         0          0</span>
<span class='co'># 7     Off Task         0          0</span>

<span class='co'># Run NAEP model, warnings are about item codings</span>
<span class='va'>mmlNAEP</span> <span class='op'>&lt;-</span> <span class='fu'>mml.sdf</span><span class='op'>(</span><span class='va'>algebra</span> <span class='op'>~</span> <span class='va'>dsex</span> <span class='op'>+</span> <span class='va'>b013801</span>, <span class='va'>sdfNAEP</span>, weightVar<span class='op'>=</span><span class='st'>'origwt'</span><span class='op'>)</span>

<span class='co'># Call with Taylor</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>mmlNAEP</span>, varType<span class='op'>=</span><span class='st'>"Taylor"</span>, strataVar<span class='op'>=</span><span class='st'>"repgrp1"</span>, PSUVar<span class='op'>=</span><span class='st'>"jkunit"</span><span class='op'>)</span>

<span class='co'>## Direct Estimation with TIMSS </span>
<span class='co'># Load data </span>
<span class='fu'><a href='downloadTIMSS.html'>downloadTIMSS</a></span><span class='op'>(</span><span class='st'>"~/"</span>, year<span class='op'>=</span><span class='fl'>2015</span><span class='op'>)</span>
<span class='va'>sdfTIMSS</span> <span class='op'>&lt;-</span> <span class='fu'><a href='readTIMSS.html'>readTIMSS</a></span><span class='op'>(</span><span class='st'>"~/TIMSS/2015"</span>, countries<span class='op'>=</span><span class='st'>"usa"</span>, grade <span class='op'>=</span> <span class='st'>"4"</span><span class='op'>)</span>

<span class='co'># Run TIMSS model, warnings are about item codings </span>
<span class='va'>mmlTIMSS</span> <span class='op'>&lt;-</span> <span class='fu'>mml.sdf</span><span class='op'>(</span><span class='va'>mmat</span> <span class='op'>~</span> <span class='va'>itsex</span> <span class='op'>+</span> <span class='va'>asbg04</span>, <span class='va'>sdfTIMSS</span>, weightVar<span class='op'>=</span><span class='st'>'totwgt'</span><span class='op'>)</span>

<span class='co'># Call with Taylor</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>mmlTIMSS</span>, varType<span class='op'>=</span><span class='st'>"Taylor"</span>, strataVar<span class='op'>=</span><span class='st'>"jkzone"</span>, PSUVar<span class='op'>=</span><span class='st'>"jkrep"</span><span class='op'>)</span>
<span class='op'>}</span>


</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Paul Bailey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


