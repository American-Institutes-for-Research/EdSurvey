<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>EdSurvey Dataset Vectorization — edsurvey.data.frame.list • EdSurvey</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EdSurvey Dataset Vectorization — edsurvey.data.frame.list"><meta name="description" content="The edsurvey.data.frame.list function creates an
             edsurvey.data.frame.list object from a series of
             edsurvey.data.frame objects.
             append.edsurvey.data.frame.list creates an
             edsurvey.data.frame.list from two
             edsurvey.data.frame or edsurvey.data.frame.list objects.
An edsurvey.data.frame.list is useful for looking at
             data, for example, across time or graphically, and reduces
             repetition in function calls.
             The user may specify a variable that varies across the
             edsurvey.data.frame objects that is
             then included in further output."><meta property="og:description" content="The edsurvey.data.frame.list function creates an
             edsurvey.data.frame.list object from a series of
             edsurvey.data.frame objects.
             append.edsurvey.data.frame.list creates an
             edsurvey.data.frame.list from two
             edsurvey.data.frame or edsurvey.data.frame.list objects.
An edsurvey.data.frame.list is useful for looking at
             data, for example, across time or graphically, and reduces
             repetition in function calls.
             The user may specify a variable that varies across the
             edsurvey.data.frame objects that is
             then included in further output."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EdSurvey</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.8</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/introduction.html">Introduction to Analyzing NCES Data Using EdSurvey</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/American-Institutes-for-Research/EdSurvey/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>EdSurvey Dataset Vectorization</h1>
      <small class="dont-index">Source: <a href="https://github.com/American-Institutes-for-Research/EdSurvey/blob/HEAD/R/edsurvey.data.frame.list.R" class="external-link"><code>R/edsurvey.data.frame.list.R</code></a></small>
      <div class="d-none name"><code>edsurvey.data.frame.list.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>edsurvey.data.frame.list</code> function creates an
             <code>edsurvey.data.frame.list</code> object from a series of
             <code>edsurvey.data.frame</code> objects.
             <code>append.edsurvey.data.frame.list</code> creates an
             <code>edsurvey.data.frame.list</code> from two
             <code>edsurvey.data.frame</code> or <code>edsurvey.data.frame.list</code> objects.</p>
<p>An <code>edsurvey.data.frame.list</code> is useful for looking at
             data, for example, across time or graphically, and reduces
             repetition in function calls.
             The user may specify a variable that varies across the
             <code>edsurvey.data.frame</code> objects that is
             then included in further output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">edsurvey.data.frame.list</span><span class="op">(</span><span class="va">datalist</span>, cov <span class="op">=</span> <span class="cn">NULL</span>, labels <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">append.edsurvey.data.frame.list</span><span class="op">(</span><span class="va">sdfA</span>, <span class="va">sdfB</span>, labelsA <span class="op">=</span> <span class="cn">NULL</span>, labelsB <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-datalist">datalist<a class="anchor" aria-label="anchor" href="#arg-datalist"></a></dt>
<dd><p>a list of <code>edsurvey.data.frame</code>s to be combined</p></dd>


<dt id="arg-cov">cov<a class="anchor" aria-label="anchor" href="#arg-cov"></a></dt>
<dd><p>a character vector that indicates what varies across
the <code>edsurvey.data.frame</code> objects.
Guessed if not supplied. For example,
if several <code>edsurvey.data.frame</code>s for several
different countries are supplied, then <code>cov</code> would
be set to the country.</p></dd>


<dt id="arg-labels">labels<a class="anchor" aria-label="anchor" href="#arg-labels"></a></dt>
<dd><p>a character vector that specifies labels. Must be the
same length
as <code>datalist</code>. Not needed if <code>cov</code> exists or can be
guessed. See Examples.</p></dd>


<dt id="arg-sdfa">sdfA<a class="anchor" aria-label="anchor" href="#arg-sdfa"></a></dt>
<dd><p>an <code>edsurvey.data.frame</code> or an <code>edsurvey.data.frame.list</code> to be combined</p></dd>


<dt id="arg-sdfb">sdfB<a class="anchor" aria-label="anchor" href="#arg-sdfb"></a></dt>
<dd><p>an <code>edsurvey.data.frame</code> or an <code>edsurvey.data.frame.list</code> to be combined</p></dd>


<dt id="arg-labelsa">labelsA<a class="anchor" aria-label="anchor" href="#arg-labelsa"></a></dt>
<dd><p>a character vector that specifies <code>labels</code> for <code>sdfA</code> when creating
the new <code>edsurvey.data.frame.list</code>.</p></dd>


<dt id="arg-labelsb">labelsB<a class="anchor" aria-label="anchor" href="#arg-labelsb"></a></dt>
<dd><p>a character vector that specifies <code>labels</code> for <code>sdfB</code> when creating
the new <code>edsurvey.data.frame.list</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>edsurvey.data.frame.list</code> returns an <code>edsurvey.data.frame.list</code> with
elements</p>
<dl><dt>datalist</dt>
<dd><p>a list of <code>edsurvey.data.frame</code> objects</p></dd>

<dt>covs</dt>
<dd><p>a character vector of key variables that vary within
                   the <code>edsurvey.data.frame.list</code>.
                   When labels are included, they will be included in
                   <code>covs</code>. In the unusual circumstance that <code>sdfA</code> or <code>sdfB</code>
                   is an <code>edsurvey.data.frame.list</code>
                   has <code>covs</code>, and labels are not supplied, the <code>covs</code>
                   are simply pasted together with colons between them.</p></dd>


</dl><p><code>append.edsurvey.data.frame.list</code> returns an <code>edsurvey.data.frame.list</code> with
elements</p>
<dl><dt>datalist</dt>
<dd><p>a list of <code>edsurvey.data.frame</code> objects</p></dd>

<dt>covs</dt>
<dd><p>a character vector of key variables that vary within
                   the <code>edsurvey.data.frame.list</code>.
                   When labels are included, they will be included in
                   <code>covs</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>edsurvey.data.frame.list</code> can be used in place of an
<code>edsurvey.data.frame</code> in function calls, and results are returned
for each of the component <code>edsurvey.data.frame</code>s, with the
organization of the results varying by the particular method.</p>
<p>An <code>edsurvey.data.frame.list</code> can be created from several
<code>edsurvey.data.frame</code> objects that are related;
for example, all are NAEP mathematics assessments but have one or more
differences (e.g.,  they are all from different years).
Another example could be data from multiple countries for an
international assessment.</p>
<p>When <code>cov</code> and <code>labels</code> are both missing, <code>edsurvey.data.frame.list</code>
attempts to guess what variables may be varying and uses those. When there are no
varying covariates, generic labels are automatically generated.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Paul Bailey, Huade Huo</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># read in the example data (generated, not real student data)</span></span></span>
<span class="r-in"><span><span class="va">sdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="readNAEP.html">readNAEP</a></span><span class="op">(</span>path<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/data"</span>, <span class="st">"M36NT2PM.dat"</span>, package<span class="op">=</span><span class="st">"NAEPprimer"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># NOTE: the following code would not normally have to be run but is used here</span></span></span>
<span class="r-in"><span><span class="co"># to generate demo data.</span></span></span>
<span class="r-in"><span><span class="co"># Specifically, make subsets of sdf by the scrpsu variable,</span></span></span>
<span class="r-in"><span><span class="co"># "Scrambled PSU and school code"</span></span></span>
<span class="r-in"><span><span class="va">sdfA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">sdf</span>, <span class="va">scrpsu</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">45</span>,<span class="fl">56</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sdfB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">sdf</span>, <span class="va">scrpsu</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">75</span>,<span class="fl">76</span>,<span class="fl">78</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sdfC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">sdf</span>, <span class="va">scrpsu</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">100</span><span class="op">:</span><span class="fl">200</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sdfD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">sdf</span>, <span class="va">scrpsu</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fl">201</span><span class="op">:</span><span class="fl">300</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># construct an edsurvey.data.frame.list from these four data sets</span></span></span>
<span class="r-in"><span><span class="va">sdfl</span> <span class="op">&lt;-</span> <span class="fu">edsurvey.data.frame.list</span><span class="op">(</span>datalist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">sdfA</span>, <span class="va">sdfB</span>, <span class="va">sdfC</span>, <span class="va">sdfD</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                 labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A locations"</span>,</span></span>
<span class="r-in"><span>                                          <span class="st">"B locations"</span>,</span></span>
<span class="r-in"><span>                                          <span class="st">"C locations"</span>,</span></span>
<span class="r-in"><span>                                          <span class="st">"D locations"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># alternative method of building</span></span></span>
<span class="r-in"><span><span class="va">sdfl2</span> <span class="op">&lt;-</span> <span class="va">sdfA</span> <span class="op">+</span> <span class="va">sdfB</span> <span class="op">+</span> <span class="va">sdfC</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check contents</span></span></span>
<span class="r-in"><span><span class="va">sdfA</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">sdfl</span></span></span>
<span class="r-in"><span><span class="co"># note %in% checks by survey (NAEP 2005 Math for sdf,</span></span></span>
<span class="r-in"><span><span class="co"># sdfA, sdfB, sdfC, and sdfD) not by subset, so this also return TRUE</span></span></span>
<span class="r-in"><span><span class="va">sdfD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">sdfl2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># this shows how these datasets will be described</span></span></span>
<span class="r-in"><span><span class="va">sdfl</span><span class="op">$</span><span class="va">covs</span> </span></span>
<span class="r-in"><span><span class="co"># get the gaps between Male and Female for each data set</span></span></span>
<span class="r-in"><span><span class="va">gap1</span> <span class="op">&lt;-</span> <span class="fu"><a href="gap.html">gap</a></span><span class="op">(</span>variable<span class="op">=</span><span class="st">"composite"</span>, data<span class="op">=</span><span class="va">sdfl</span>, <span class="va">dsex</span><span class="op">==</span><span class="st">"Male"</span>, <span class="va">dsex</span><span class="op">==</span><span class="st">"Female"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gap1</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># make combine sdfA and sdfB</span></span></span>
<span class="r-in"><span><span class="va">sdfl1a</span> <span class="op">&lt;-</span> <span class="fu">edsurvey.data.frame.list</span><span class="op">(</span>datalist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">sdfA</span>, <span class="va">sdfB</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A locations"</span>,</span></span>
<span class="r-in"><span>                                            <span class="st">"B locations"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># combine sdfC and sdfD</span></span></span>
<span class="r-in"><span><span class="va">sdfl1b</span> <span class="op">&lt;-</span> <span class="fu">edsurvey.data.frame.list</span><span class="op">(</span>datalist<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">sdfC</span>, <span class="va">sdfD</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                   labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C locations"</span>,</span></span>
<span class="r-in"><span>                                            <span class="st">"D locations"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># append to make sdf3 the same as sdfl</span></span></span>
<span class="r-in"><span><span class="va">sdfl3</span> <span class="op">&lt;-</span> <span class="fu">append.edsurvey.data.frame.list</span><span class="op">(</span>sdfA<span class="op">=</span><span class="va">sdfl1a</span>, sdfB<span class="op">=</span><span class="va">sdfl1b</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">sdfl</span>, <span class="va">sdfl3</span><span class="op">)</span> <span class="co">#TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># append to make sdf4 the same as sdfl</span></span></span>
<span class="r-in"><span><span class="va">sdfl4</span> <span class="op">&lt;-</span> <span class="fu">append.edsurvey.data.frame.list</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">append.edsurvey.data.frame.list</span><span class="op">(</span>sdfA<span class="op">=</span><span class="va">sdfl1a</span>, sdfB<span class="op">=</span><span class="va">sdfC</span>, labelsB <span class="op">=</span> <span class="st">"C locations"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="va">sdfD</span>,</span></span>
<span class="r-in"><span>  labelsB <span class="op">=</span> <span class="st">"D locations"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">sdfl</span>, <span class="va">sdfl4</span><span class="op">)</span> <span class="co">#TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show label deconflicting</span></span></span>
<span class="r-in"><span><span class="va">t11</span> <span class="op">&lt;-</span> <span class="fu"><a href="readTIMSS.html">readTIMSS</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"~/TIMSS/2011"</span>, countries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fin"</span>, <span class="st">"usa"</span><span class="op">)</span>, gradeLvl <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t15</span> <span class="op">&lt;-</span> <span class="fu"><a href="readTIMSS.html">readTIMSS</a></span><span class="op">(</span>path<span class="op">=</span><span class="st">"~/TIMSS/2015"</span>, countries <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fin"</span>, <span class="st">"usa"</span><span class="op">)</span>, gradeLvl <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># these would not be unique</span></span></span>
<span class="r-in"><span><span class="va">t11</span><span class="op">$</span><span class="va">covs</span></span></span>
<span class="r-in"><span><span class="va">t15</span><span class="op">$</span><span class="va">covs</span></span></span>
<span class="r-in"><span><span class="co"># resulting values includes year now</span></span></span>
<span class="r-in"><span><span class="va">t11_15</span> <span class="op">&lt;-</span> <span class="fu">append.edsurvey.data.frame.list</span><span class="op">(</span>sdfA<span class="op">=</span><span class="va">t11</span>, sdfB<span class="op">=</span><span class="va">t15</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">t11_15</span><span class="op">$</span><span class="va">covs</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Bailey, Ahmad Emad, Huade Huo, Michael Lee, Yuqi Liao, Alex Lishinski, Trang Nguyen, Qingshu Xie, Jiao Yu, Ting Zhang, Eric Buehler, Sun-joo Lee, Blue Webb, Thomas Fink, Sinan Yavuz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

